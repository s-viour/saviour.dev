+++
tags = ["writeup"]
title = "the CYK algorithm (visually)"
index = "0011"
slug = "0011"
layout = "default"
+++
★ **update: this article is dead wrong!** i'll fix it later. don't use this as a guide

the CYK algorithm is a method for determining whether or not a particular string is generated by a CFG in CNF. here's a visual dynamic programming approach for working this out:

for an example, our grammar is
```
S -> RT
R -> TR | a
T -> TR | b
```
and our string is `bbab`

**Step 1.** create an empty n-by-n table where `n` is the length of the string. so in this case, we need a 4-by-4 table:

| _ | 1 | 2 | 3 | 4 |
| - | - | - | - | - |
| **1** | _ | _ | _ | _ |
| **2** | _ | _ | _ | _ |
| **3** | _ | _ | _ | _ |
| **4** | _ | _ | _ | _ |


**Step 2.** fill the main diagonal with all variables that could generate the nth character of our string. so for example, the first character is `b`. only the `T` variable could generate a `b`, so we put `T` in (1, 1). it's the same situation with (2, 2). third, we look at `a`, and only an `R` variable could generate it. so we put `R` in (3, 3). finally, `T` goes in (4, 4). the table now looks like

| _ | 1 | 2 | 3 | 4 |
| - | - | - | - | - |
| **1** | T | _ | _ | _ |
| **2** | _ | T | _ | _ |
| **3** | _ | _ | R | _ |
| **4** | _ | _ | _ | T |


**Step 3.** now look at the spaces in-between the filled in letters, on the diagonal. i've highlighted the important spaces here:

| _ | 1 | 2 | 3 | 4 |
| - | - | - | - | - |
| **1** | T | **★** | _ | _ |
| **2** | _ | T | **★** | _ |
| **3** | _ | _ | R | **★** |
| **4** | _ | _ | _ | T |

for each of those spaces, we're looking for a rule that could generate `BC` where `B` is any of the variables to the left, and `C` is any variables below. so, for the (2, 1) space, all variables to the left are `T` and all possible variables below are `T`. so the only combination is `TT`. nothing in the grammar can generate `TT` though! so we just put a `/` there:

| _ | 1 | 2 | 3 | 4 |
| - | - | - | - | - |
| **1** | T | / | _ | _ |
| **2** | _ | T | **★** | _ |
| **3** | _ | _ | R | **★** |
| **4** | _ | _ | _ | T |

now let's look at the second space (3, 2): all left-side variables are `T` and all possible below variables are `R`. so the only combination is `TR`. luckily, both `R` **and** `T` can generate `TR`, so we put them both down:

| _ | 1 | 2 | 3 | 4 |
| - | - | - | - | - |
| **1** | T | / | _ | _ |
| **2** | _ | T | R,T | _ |
| **3** | _ | _ | R | **★** |
| **4** | _ | _ | _ | T |

finally, for the last space, (4, 3), we look for something that can generate `RT`. `S` is the only variable that generates that, so we put `S` in space (4, 3):

| _ | 1 | 2 | 3 | 4 |
| - | - | - | - | - |
| **1** | T | / | _ | _ |
| **2** | _ | T | R,T | _ |
| **3** | _ | _ | R | S |
| **4** | _ | _ | _ | T |

and finally we've filled in the second diagonal!

**Step 4.** fill in the remaining diagonals using the same method from Step 3. from now on, i'll highlight all possible left-side variables in red, and all possible below variables in blue. **blanks or slashes are ignored!** here are the spaces we're considering:

| _ | 1 | 2 | 3 | 4 |
| - | - | - | - | - |
| **1** | T | / | **★** | _ |
| **2** | _ | T | R,T | **★** |
| **3** | _ | _ | R | S |
| **4** | _ | _ | _ | T |

for the first space, here's our possible combinations:

| _ | 1 | 2 | 3 | 4 |
| - | - | - | - | - |
| **1** | <span style="color:red">T</span> | / | **★** | _ |
| **2** | _ | T | <span style="color:blue">R,T</span> | **★** |
| **3** | _ | _ | <span style="color:blue">R</span> | S |
| **4** | _ | _ | _ | T |

possible combinations: `TR`, `TT`

nothing can generate `TT`, but both `R` and `T` can generate `TR`, so the first star gets `R,T`:

| _ | 1 | 2 | 3 | 4 |
| - | - | - | - | - |
| **1** | T | / | R,T | _ |
| **2** | _ | T | R,T | **★** |
| **3** | _ | _ | R | S |
| **4** | _ | _ | _ | T |

for the second star, here are our possible combinations:

| _ | 1 | 2 | 3 | 4 |
| - | - | - | - | - |
| **1** | T | / | R,T | _ |
| **2** | _ | <span style="color:red">T</span> | <span style="color:red">R,T</span> | **★** |
| **3** | _ | _ | R | <span style="color:blue">S</span> |
| **4** | _ | _ | _ | <span style="color:blue">T</span> |

possible combinations: `TS`, `RS`, `TT`, `RT`

nothing can generate `TS`, `RS`, or `TT`. but `S` can generate `RT`, so the second star gets `S`:

| _ | 1 | 2 | 3 | 4 |
| - | - | - | - | - |
| **1** | T | / | R,T | _ |
| **2** | _ | T | R,T | S |
| **3** | _ | _ | R | S |
| **4** | _ | _ | _ | T |


**Finally.** we consider the last space:

| _ | 1 | 2 | 3 | 4 |
| - | - | - | - | - |
| **1** | <span style="color:red">T</span> | / | <span style="color:red">R,T</span> | **★** |
| **2** | _ | T | R,T | <span style="color:blue">S</span> |
| **3** | _ | _ | R | <span style="color:blue">S</span> |
| **4** | _ | _ | _ | <span style="color:blue">T</span> |

possible combinations: `TS`, `TT`, `RS`, `RT`

nothing can generate `TS`, `TT`, or `RS`. `S` can generate `RT`, so we put `S` in the last space!

| _ | 1 | 2 | 3 | 4 |
| - | - | - | - | - |
| **1** | T | / | R,T | S |
| **2** | _ | T | R,T | S |
| **3** | _ | _ | R | S |
| **4** | _ | _ | _ | T |

and the table is filled out! if `S` is in the top row **at all**, then the string is accepted! otherwise, it's rejected.
